<% if (updateInfo?.updateAvailable) { %>
  <div class="bg-yellow-100 text-yellow-800 p-4 mb-4 rounded border border-yellow-300">
    <strong>Update Available:</strong> Version <%= updateInfo.latestVersion %> is available.
    You are running <%= updateInfo.currentVersion %>.<br>
    <form action="/admin/update/download-update" method="POST" onsubmit="return confirm('Download and extract the update now?');">
      <input type="hidden" name="zipUrl" value="<%= updateInfo.url %>">
      <button type="submit" class="btn btn-blue">Download Update</button>
    </form>
    <% if (updateInfo.notes) { 
         const match = updateInfo.notes.match(/(https?:\/\/[^\s]+)/);
         const preText = updateInfo.notes.replace(match?.[0], '').trim();
    %><br>
      <%= preText %> <a href="<%= match[0] %>" target="_blank" class="underline"><%= match[0] %></a>
    <% } %>
  </div>
<% } %>

<h1>Admin Dashboard</h1>

<p>Welcome<% if (user) { %>, <strong><%= user.username %></strong><% } %>.</p>

<ul>
  <li><a href="/admin/users">ğŸ‘¥ Manage Users</a></li>
  <li><a href="/admin/manifest/config">ğŸ“¦ Manifest Config</a></li>
  <li><a href="/admin/news">ğŸ“° Edit News</a></li>
  <li><a href="/admin/style">ğŸ¨ Edit Site Style</a></li>
  <li><a href="/admin/edit_blacklist">â›” Edit Badge Blacklist</a></li>
  <li><a href="/admin/config">ğŸ› ï¸ Edit Config</a></li>
</ul>

<p><a href="/">â† Back to Site</a></p>
